:root{
  --navy:#0b1020;
  --primary:#6366f1;
  --primary-700:#4f46e5;
  --primary-800:#4338ca;
  --accent:#8b5cf6;
  --paper:#e9eef6;
  --card:#f3f4f6;
  --ink:#111827;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;color:var(--ink);background:linear-gradient(180deg,#e9eef6 0%,#e5ebf4 100%);font-size:16px;line-height:1.6;-webkit-font-smoothing:antialiased;letter-spacing:.15px}
a{color:inherit}
/* Layout */
.sidebar{position:fixed;top:0;left:0;bottom:0;width:290px;background:#0f172a;color:#e2e8f0;border-right:1px solid #334155;display:flex;flex-direction:column;padding:18px;gap:14px}
.right-panel{position:fixed;top:0;right:0;bottom:0;width:300px;background:#f8fafc;color:#111827;border-left:1px solid #d1d5db;display:flex;flex-direction:column;padding:18px;gap:14px;overflow-y:auto}
.brand h1{font-size:1.1rem;margin:0 0 6px 0}
.brand p{font-size:.95rem;margin:0;color:#cbd5e1}
.toc{display:flex;flex-direction:column;gap:6px;margin-top:6px}
.toc a{padding:10px 12px;border-radius:10px;text-decoration:none;color:#e2e8f0;border:1px solid transparent;transition:transform .08s ease, background .15s ease, border-color .2s ease}
.toc a:hover{background:#0e1633;transform:translateX(2px);border-color:#3b4a65}
.toc a.active{background:#4f46e5}
.side-actions{margin-top:auto;display:flex;flex-direction:column;gap:8px}
.side-actions button{padding:10px 12px;border-radius:12px;border:1px solid #1f2937;background:#6366f1;color:white;cursor:pointer;transition:transform .08s ease, box-shadow .15s ease}
.side-actions button:hover{transform:translateY(-1px);box-shadow:0 6px 14px rgba(0,0,0,.25)}
.side-actions .primary{background:#6366f1}
.content{position:relative;margin-left:290px;margin-right:300px;width:calc(100% - 290px - 300px);padding:16px 28px 120px}
/* Cards and questions */
.card{background:var(--card);border:1px solid #d1d5db;border-radius:18px;padding:24px;margin:20px auto;box-shadow:0 10px 28px rgba(15,23,42,.10),0 1px 3px rgba(15,23,42,.05);animation:pop .18s ease-out;max-width:1200px;transition:box-shadow .2s ease}
.card:hover{box-shadow:0 14px 36px rgba(15,23,42,.14),0 2px 6px rgba(15,23,42,.08)}
@media (min-width:1600px){.card{max-width:1400px}}
@keyframes pop{from{transform:scale(.995);opacity:.97}to{transform:scale(1);opacity:1}}
h2{font-size:1.25rem;margin:0 0 16px 0;color:var(--ink);font-weight:700;border-bottom:2px solid #6366f1;padding-bottom:8px}
.grid{display:grid;gap:12px}
.grid-4{grid-template-columns:repeat(4,1fr)}
@media (max-width:1200px){.grid-4{grid-template-columns:repeat(2,1fr)}}
@media (max-width:760px){.grid-4{grid-template-columns:1fr} .sidebar{width:240px} .content{margin-left:240px;width:calc(100% - 240px)} .right-panel{display:none}}
label{display:block;font-size:1rem;font-weight:600}
input,textarea{width:100%;padding:12px 12px;border:1px solid #cbd5e1;border-radius:12px;background:#f8fafc;font-size:1rem;line-height:1.55;transition:border-color .15s ease, box-shadow .15s ease}
input:focus,textarea:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px rgba(99,102,241,.18)}
.q{margin:20px 0;padding:16px;border-left:5px solid #8b5cf6;background:linear-gradient(90deg, rgba(139,92,246,.09), transparent 70%);border-radius:12px;transition:box-shadow .15s ease,transform .08s ease}
.q:hover{box-shadow:0 8px 18px rgba(15,23,42,.10);transform:translateX(2px)}
.chips{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.chips button{padding:10px 16px;border:2px solid #cbd5e1;background:#ffffff;border-radius:12px;cursor:pointer;transition:transform .08s ease, box-shadow .12s ease, border-color .15s ease, background .15s ease, color .15s ease;font-weight:700;font-size:0.95rem}
.chips button:hover{transform:translateY(-2px);box-shadow:0 10px 18px rgba(15,23,42,.14);border-color:#64748b}
.chips button.active{background:#6366f1;color:#ffffff;border-color:#6366f1;box-shadow:0 0 0 3px rgba(99,102,241,.3), inset 0 -2px 0 rgba(0,0,0,.15)}
.chips button.active:hover{background:#4f46e5;border-color:#4f46e5;box-shadow:0 0 0 3px rgba(99,102,241,.4), inset 0 -2px 0 rgba(0,0,0,.15)}
.chips button:focus-visible{outline:3px solid rgba(99,102,241,.5);outline-offset:2px}
.prompt{margin-bottom:10px;padding:12px 14px;background:#ffffff;border:2px solid #e5e7eb;border-radius:10px;font-weight:600;font-size:1.02rem;line-height:1.5;transition:border-color .15s ease,box-shadow .15s ease}
.prompt:hover{border-color:#cbd5e1;box-shadow:0 2px 8px rgba(15,23,42,.06)}
.token{display:inline-block;padding:0 2px;border-bottom:none;border-radius:4px;min-width:1ch;background:rgba(99,102,241,.10)}
/* Notes collapse */
.notes{margin-top:8px;border:1px dashed #cbd5e1;border-radius:12px;padding:0;overflow:hidden;transition:max-height .18s ease, padding .18s ease, border-color .18s ease}
.notes.collapsed{max-height:0;padding:0;border-color:transparent}
.notes:not(.collapsed){max-height:260px;padding:8px}
.notes textarea{width:100%;min-height:120px;border-radius:10px}
/* Visible trigger */
.notes-trigger{display:inline-block;margin-top:8px;border:1px solid #94a3b8;background:#f8fafc;border-radius:999px;padding:6px 10px;font-size:.9rem;cursor:pointer;transition:background .15s ease, transform .08s ease}
.notes-trigger:hover{background:#e6ebf3;transform:translateY(-1px)}
/* Appointment grid */
#appt-grid .appt-row{display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:end;margin:8px 0}
#appt-grid .datecell{display:grid;grid-template-rows:auto auto;gap:6px}
#appt-grid .datehead{display:flex;align-items:center;gap:8px}
.remove-time{border:1px solid #e11d48;background:#fee2e2;color:#991b1b;border-radius:8px;padding:2px 8px;cursor:pointer}
.remove-time:hover{background:#fecaca}
.timecell label,.datecell label{margin-bottom:2px}
/* toast */
.toast{position:fixed;right:24px;bottom:24px;background:#6366f1;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 10px 24px rgba(0,0,0,.25);opacity:0;transform:translateY(8px);transition:opacity .15s ease, transform .15s ease}
.toast.show{opacity:1;transform:translateY(0)}
.right-panel h3{font-size:1.1rem;margin:0 0 10px 0;color:var(--ink)}
#notes-summary{display:flex;flex-direction:column;gap:8px}
.note-item{background:#ffffff;border:1px solid #e5e7eb;border-radius:8px;padding:10px;font-size:.9rem;line-height:1.4}
.note-item strong{color:#6366f1;margin-bottom:4px;display:block}
.note-item:empty{display:none}
/* Developer mode styles */
.developer-mode .prompt[contenteditable]{border:2px dashed #6366f1;background:#eef2ff;padding:10px;box-shadow:0 0 0 3px rgba(99,102,241,.08);transition:all .15s ease}
.developer-mode .prompt[contenteditable]:focus{border-color:#4f46e5;background:#e0e7ff;box-shadow:0 0 0 4px rgba(99,102,241,.15)}
.developer-mode .chips{position:relative}
.developer-mode .add-chip{position:absolute;top:-2px;right:-2px;background:#6366f1;color:white;border:none;border-radius:50%;width:20px;height:20px;cursor:pointer;font-size:12px;box-shadow:0 2px 6px rgba(0,0,0,.2);transition:transform .08s ease}
.developer-mode .add-chip:hover{transform:scale(1.1)}
.developer-mode .chip-delete{position:absolute;top:-2px;right:-2px;background:#e11d48;color:white;border:none;border-radius:50%;width:16px;height:16px;cursor:pointer;font-size:10px;display:none}
.developer-mode .chips button:hover .chip-delete{display:block}
.developer-mode .section-controls{display:flex;gap:10px;margin-bottom:12px;padding:10px;background:#f1f5f9;border-radius:8px;border:1px solid #cbd5e1}
.developer-mode .delete-section{background:#e11d48;color:white;border:none;padding:8px 14px;border-radius:6px;cursor:pointer;font-size:13px;font-weight:600;transition:background .15s ease,transform .08s ease}
.developer-mode .delete-section:hover{background:#be123c;transform:translateY(-1px)}
.developer-mode .developer-textarea{width:100%;min-height:60px;border:2px solid #6366f1;background:#eef2ff;padding:10px;border-radius:8px;font-size:1rem;line-height:1.4;transition:all .15s ease}
.developer-mode .developer-textarea:focus{border-color:#4f46e5;background:#e0e7ff;box-shadow:0 0 0 4px rgba(99,102,241,.15)}

/* Prompt controls (for token insertion and question management) */
.prompt-controls{background:#f8fafc;border:2px solid #cbd5e1;padding:10px;margin:8px 0;display:flex;gap:10px;flex-wrap:wrap;align-items:center;border-radius:10px;box-shadow:0 2px 8px rgba(15,23,42,.06)}
.prompt-controls button{background:#2196F3;color:white;border:none;padding:6px 14px;cursor:pointer;border-radius:6px;font-size:13px;font-weight:600;transition:background .15s ease,transform .08s ease}
.prompt-controls button:hover{background:#1976D2;transform:translateY(-1px)}
.prompt-controls .token-btn{background:#6366f1;padding:4px 10px;font-size:12px}
.prompt-controls .token-btn:hover{background:#4f46e5}
.add-question-after{background:#2196F3;color:white;border:none;padding:8px 16px;cursor:pointer;margin:8px 0;border-radius:8px;font-size:13px;font-weight:600;display:inline-block;transition:background .15s ease,transform .08s ease}
.add-question-after:hover{background:#1976D2;transform:translateY(-1px)}

/* Developer toolbar at top */
#developer-toolbar{position:fixed;top:0;left:290px;right:300px;background:#1e293b;border-bottom:2px solid #6366f1;padding:12px 20px;display:flex;gap:12px;align-items:center;z-index:1000;box-shadow:0 4px 12px rgba(0,0,0,.15)}
#developer-toolbar button{background:#6366f1;color:white;border:none;padding:8px 16px;cursor:pointer;border-radius:6px;font-size:13px;font-weight:600;transition:background .15s ease,transform .08s ease}
#developer-toolbar button:hover{background:#4f46e5;transform:translateY(-1px)}
#developer-toolbar .undo-redo{display:flex;gap:6px}
#developer-toolbar .danger{background:#e11d48}
#developer-toolbar .danger:hover{background:#be123c}

/* Adjust content padding when developer mode is active */
.developer-mode .content{padding-top:70px}
